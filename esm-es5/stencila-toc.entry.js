import{r as registerInstance,h}from"./index-9edcbeb0.js";import{c as createCommonjsModule,a as commonjsGlobal}from"./_commonjsHelpers-8a9f3b18.js";var defaultOptions={tocSelector:".js-toc",contentSelector:".js-toc-content",headingSelector:"h1, h2, h3",ignoreSelector:".js-toc-ignore",hasInnerContainers:false,linkClass:"toc-link",extraLinkClasses:"",activeLinkClass:"is-active-link",listClass:"toc-list",extraListClasses:"",isCollapsedClass:"is-collapsed",collapsibleClass:"is-collapsible",listItemClass:"toc-list-item",activeListItemClass:"is-active-li",collapseDepth:0,scrollSmooth:true,scrollSmoothDuration:420,scrollSmoothOffset:0,scrollEndCallback:function(e){},headingsOffset:1,throttleTimeout:50,positionFixedSelector:null,positionFixedClass:"is-position-fixed",fixedSidebarOffset:"auto",includeHtml:false,onClick:function(e){},orderedList:true,scrollContainer:null,skipRendering:false,headingLabelCallback:false,ignoreHiddenElements:false,headingObjectCallback:null,basePath:"",disableTocScrollSync:false};var buildHtml=function(e){var t=[].forEach;var o=[].some;var n=document.body;var l=true;var i=" ";function r(e,t){var o=t.appendChild(s(e));if(e.children.length){var n=c(e.isCollapsed);e.children.forEach((function(e){r(e,n)}));o.appendChild(n)}}function a(e,t){var o=false;var n=c(o);t.forEach((function(e){r(e,n)}));var l=document.querySelector(e);if(l===null){return}if(l.firstChild){l.removeChild(l.firstChild)}if(t.length===0){return l}return l.appendChild(n)}function s(o){var n=document.createElement("li");var l=document.createElement("a");if(e.listItemClass){n.setAttribute("class",e.listItemClass)}if(e.onClick){l.onclick=e.onClick}if(e.includeHtml&&o.childNodes.length){t.call(o.childNodes,(function(e){l.appendChild(e.cloneNode(true))}))}else{l.textContent=o.textContent}l.setAttribute("href",e.basePath+"#"+o.id);l.setAttribute("class",e.linkClass+i+"node-name--"+o.nodeName+i+e.extraLinkClasses);n.appendChild(l);return n}function c(t){var o=e.orderedList?"ol":"ul";var n=document.createElement(o);var l=e.listClass+i+e.extraListClasses;if(t){l+=i+e.collapsibleClass;l+=i+e.isCollapsedClass}n.setAttribute("class",l);return n}function d(){if(e.scrollContainer&&document.querySelector(e.scrollContainer)){var t;t=document.querySelector(e.scrollContainer).scrollTop}else{t=document.documentElement.scrollTop||n.scrollTop}var o=document.querySelector(e.positionFixedSelector);if(e.fixedSidebarOffset==="auto"){e.fixedSidebarOffset=document.querySelector(e.tocSelector).offsetTop}if(t>e.fixedSidebarOffset){if(o.className.indexOf(e.positionFixedClass)===-1){o.className+=i+e.positionFixedClass}}else{o.className=o.className.split(i+e.positionFixedClass).join("")}}function f(t){var o=0;if(t!==document.querySelector(e.contentSelector&&t!=null)){o=t.offsetTop;if(e.hasInnerContainers){o+=f(t.offsetParent)}}return o}function u(r){if(e.scrollContainer&&document.querySelector(e.scrollContainer)){var a;a=document.querySelector(e.scrollContainer).scrollTop}else{a=document.documentElement.scrollTop||n.scrollTop}if(e.positionFixedSelector){d()}var s=r;var c;if(l&&document.querySelector(e.tocSelector)!==null&&s.length>0){o.call(s,(function(t,o){if(f(t)>a+e.headingsOffset+10){var n=o===0?o:o-1;c=s[n];return true}else if(o===s.length-1){c=s[s.length-1];return true}}));var u=document.querySelector(e.tocSelector).querySelectorAll("."+e.linkClass);t.call(u,(function(t){t.className=t.className.split(i+e.activeLinkClass).join("")}));var h=document.querySelector(e.tocSelector).querySelectorAll("."+e.listItemClass);t.call(h,(function(t){t.className=t.className.split(i+e.activeListItemClass).join("")}));var p=document.querySelector(e.tocSelector).querySelector("."+e.linkClass+".node-name--"+c.nodeName+'[href="'+e.basePath+"#"+c.id.replace(/([ #;&,.+*~':"!^$[\]()=>|/@])/g,"\\$1")+'"]');if(p.className.indexOf(e.activeLinkClass)===-1){p.className+=i+e.activeLinkClass}var v=p.parentNode;if(v&&v.className.indexOf(e.activeListItemClass)===-1){v.className+=i+e.activeListItemClass}var C=document.querySelector(e.tocSelector).querySelectorAll("."+e.listClass+"."+e.collapsibleClass);t.call(C,(function(t){if(t.className.indexOf(e.isCollapsedClass)===-1){t.className+=i+e.isCollapsedClass}}));if(p.nextSibling&&p.nextSibling.className.indexOf(e.isCollapsedClass)!==-1){p.nextSibling.className=p.nextSibling.className.split(i+e.isCollapsedClass).join("")}m(p.parentNode.parentNode)}}function m(t){if(t.className.indexOf(e.collapsibleClass)!==-1&&t.className.indexOf(e.isCollapsedClass)!==-1){t.className=t.className.split(i+e.isCollapsedClass).join("");return m(t.parentNode.parentNode)}return t}function h(t){var o=t.target||t.srcElement;if(typeof o.className!=="string"||o.className.indexOf(e.linkClass)===-1){return}l=false}function p(){l=true}return{enableTocAnimation:p,disableTocAnimation:h,render:a,updateToc:u}};var parseContent=function e(t){var o=[].reduce;function n(e){return e[e.length-1]}function l(e){return+e.nodeName.split("H").join("")}function i(e){if(!(e instanceof window.HTMLElement))return e;if(t.ignoreHiddenElements&&(!e.offsetHeight||!e.offsetParent)){return null}var o={id:e.id,children:[],nodeName:e.nodeName,headingLevel:l(e),textContent:t.headingLabelCallback?String(t.headingLabelCallback(e.textContent)):e.textContent.trim()};if(t.includeHtml){o.childNodes=e.childNodes}if(t.headingObjectCallback){return t.headingObjectCallback(o,e)}return o}function r(e,o){var l=i(e);var r=l.headingLevel;var a=o;var s=n(a);var c=s?s.headingLevel:0;var d=r-c;while(d>0){s=n(a);if(s&&s.children!==undefined){a=s.children}d--}if(r>=t.collapseDepth){l.isCollapsed=true}a.push(l);return a}function a(e,o){var n=o;if(t.ignoreSelector){n=o.split(",").map((function e(o){return o.trim()+":not("+t.ignoreSelector+")"}))}try{return document.querySelector(e).querySelectorAll(n)}catch(l){console.warn("Element not found: "+e);return null}}function s(e){return o.call(e,(function e(t,o){var n=i(o);if(n){r(n,t.nest)}return t}),{nest:[]})}return{nestHeadingsArray:s,selectHeadings:a}};var updateTocScroll=function e(t){var o=document.querySelector(t.tocSelector);if(o&&o.scrollHeight>o.clientHeight){var n=o.querySelector("."+t.activeListItemClass);if(n){o.scrollTop=n.offsetTop}}};var initSmoothScrolling_1=initSmoothScrolling;function initSmoothScrolling(e){var t=e.duration;var o=e.offset;var n=location.hash?r(location.href):location.href;l();function l(){document.body.addEventListener("click",n,false);function n(n){if(!i(n.target)||n.target.className.indexOf("no-smooth-scroll")>-1||n.target.href.charAt(n.target.href.length-2)==="#"&&n.target.href.charAt(n.target.href.length-1)==="!"||n.target.className.indexOf(e.linkClass)===-1){return}jump(n.target.hash,{duration:t,offset:o,callback:function(){a(n.target.hash)}})}}function i(e){return e.tagName.toLowerCase()==="a"&&(e.hash.length>0||e.href.charAt(e.href.length-1)==="#")&&(r(e.href)===n||r(e.href)+"#"===n)}function r(e){return e.slice(0,e.lastIndexOf("#"))}function a(e){var t=document.getElementById(e.substring(1));if(t){if(!/^(?:a|select|input|button|textarea)$/i.test(t.tagName)){t.tabIndex=-1}t.focus()}}}function jump(e,t){var o=window.pageYOffset;var n={duration:t.duration,offset:t.offset||0,callback:t.callback,easing:t.easing||f};var l=document.querySelector('[id="'+decodeURI(e).split("#").join("")+'"]');var i=typeof e==="string"?n.offset+(e?l&&l.getBoundingClientRect().top||0:-(document.documentElement.scrollTop||document.body.scrollTop)):e;var r=typeof n.duration==="function"?n.duration(i):n.duration;var a;var s;requestAnimationFrame((function(e){a=e;c(e)}));function c(e){s=e-a;window.scrollTo(0,n.easing(s,o,i,r));if(s<r){requestAnimationFrame(c)}else{d()}}function d(){window.scrollTo(0,o+i);if(typeof n.callback==="function"){n.callback()}}function f(e,t,o,n){e/=n/2;if(e<1)return o/2*e*e+t;e--;return-o/2*(e*(e-2)-1)+t}}var scrollSmooth={initSmoothScrolling:initSmoothScrolling_1};var js=createCommonjsModule((function(e,t){(function(t,o){{e.exports=o(t)}})(typeof commonjsGlobal!=="undefined"?commonjsGlobal:commonjsGlobal.window||commonjsGlobal.global,(function(e){var t=defaultOptions;var o={};var n={};var l=buildHtml;var i=parseContent;var r=updateTocScroll;var a;var s;var c=!!e&&!!e.document&&!!e.document.querySelector&&!!e.addEventListener;if(typeof window==="undefined"&&!c){return}var d;var f=Object.prototype.hasOwnProperty;function u(){var e={};for(var t=0;t<arguments.length;t++){var o=arguments[t];for(var n in o){if(f.call(o,n)){e[n]=o[n]}}}return e}function m(e,t,o){t||(t=250);var n;var l;return function(){var i=o||this;var r=+new Date;var a=arguments;if(n&&r<n+t){clearTimeout(l);l=setTimeout((function(){n=r;e.apply(i,a)}),t)}else{n=r;e.apply(i,a)}}}n.destroy=function(){if(!o.skipRendering){try{document.querySelector(o.tocSelector).innerHTML=""}catch(e){console.warn("Element not found: "+o.tocSelector)}}if(o.scrollContainer&&document.querySelector(o.scrollContainer)){document.querySelector(o.scrollContainer).removeEventListener("scroll",this._scrollListener,false);document.querySelector(o.scrollContainer).removeEventListener("resize",this._scrollListener,false);if(a){document.querySelector(o.scrollContainer).removeEventListener("click",this._clickListener,false)}}else{document.removeEventListener("scroll",this._scrollListener,false);document.removeEventListener("resize",this._scrollListener,false);if(a){document.removeEventListener("click",this._clickListener,false)}}};n.init=function(e){if(!c){return}o=u(t,e||{});this.options=o;this.state={};if(o.scrollSmooth){o.duration=o.scrollSmoothDuration;o.offset=o.scrollSmoothOffset;n.scrollSmooth=scrollSmooth.initSmoothScrolling(o)}a=l(o);s=i(o);this._buildHtml=a;this._parseContent=s;n.destroy();d=s.selectHeadings(o.contentSelector,o.headingSelector);if(d===null){return}var f=s.nestHeadingsArray(d);var h=f.nest;if(!o.skipRendering){a.render(o.tocSelector,h)}this._scrollListener=m((function(e){a.updateToc(d);!o.disableTocScrollSync&&r(o);var t=e&&e.target&&e.target.scrollingElement&&e.target.scrollingElement.scrollTop===0;if(e&&(e.eventPhase===0||e.currentTarget===null)||t){a.updateToc(d);if(o.scrollEndCallback){o.scrollEndCallback(e)}}}),o.throttleTimeout);this._scrollListener();if(o.scrollContainer&&document.querySelector(o.scrollContainer)){document.querySelector(o.scrollContainer).addEventListener("scroll",this._scrollListener,false);document.querySelector(o.scrollContainer).addEventListener("resize",this._scrollListener,false)}else{document.addEventListener("scroll",this._scrollListener,false);document.addEventListener("resize",this._scrollListener,false)}var p=null;this._clickListener=m((function(e){if(o.scrollSmooth){a.disableTocAnimation(e)}a.updateToc(d);p&&clearTimeout(p);p=setTimeout((function(){a.enableTocAnimation()}),o.scrollSmoothDuration)}),o.throttleTimeout);if(o.scrollContainer&&document.querySelector(o.scrollContainer)){document.querySelector(o.scrollContainer).addEventListener("click",this._clickListener,false)}else{document.addEventListener("click",this._clickListener,false)}return this};n.refresh=function(e){n.destroy();n.init(e||this.options)};e.tocbot=n;return n}))}));var defaultTableOfContentsCss='a{font-family:sans-serif;font-family:var(--font-family-body,sans-serif);font-size:1rem;text-decoration:none;color:#000;color:var(--color-key,#000)}.toc{overflow-y:auto}.toc>.toc-list{overflow:hidden;position:relative}.toc>.toc-list li{list-style-type:none;line-height:1.625}.toc-list{margin:0;padding-left:.5rem}a.toc-link{height:100%;color:currentColor;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}a.toc-link:not(.is-active-link):hover{padding-left:.5rem}.is-collapsible{overflow:hidden;max-height:1000px;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.is-collapsed{max-height:0}.is-position-fixed{top:0;padding-top:1rem;position:fixed;position:fixed!important}.is-active-link{font-weight:700}.toc-link:before{position:absolute;background-color:#f7fafc;background-color:var(--color-neutral-100,#f7fafc);display:inline-block;left:0;width:.25rem;margin-top:-1px;content:" ";height:inherit}.is-active-link:before{background-color:#4299e1;background-color:var(--color-primary-500,#4299e1)}';var tableOfContentsMaterialCss='a{font-family:sans-serif;font-family:var(--font-family-body,sans-serif);font-size:1rem;text-decoration:none;color:#000;color:var(--color-key,#000)}.toc{overflow-y:auto}.toc>.toc-list{overflow:hidden;position:relative}.toc>.toc-list li{list-style-type:none;line-height:1.625}.toc-list{margin:0;padding-left:.5rem}a.toc-link{height:100%;color:currentColor;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}a.toc-link:not(.is-active-link):hover{padding-left:.5rem}.is-collapsible{overflow:hidden;max-height:1000px;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.is-collapsed{max-height:0}.is-position-fixed{top:0;padding-top:1rem;position:fixed;position:fixed!important}.is-active-link{font-weight:700}.toc-link:before{position:absolute;background-color:#f7fafc;background-color:var(--color-neutral-100,#f7fafc);display:inline-block;left:0;width:.25rem;margin-top:-1px;content:" ";height:inherit}.is-active-link:before{background-color:#4299e1;background-color:var(--color-primary-500,#4299e1)}';var TableOfContents=function(){function e(e){var t=this;registerInstance(this,e);this.contentSelector="article";this.headingSelector="h1, h2, h3, h4";this.initTOC=function(){js.init({tocSelector:".toc",positionFixedSelector:".toc",contentSelector:t.contentSelector,headingSelector:t.headingSelector})}}e.prototype.componentDidLoad=function(){if(document.readyState==="interactive"||document.readyState==="complete"&&document.querySelector(this.contentSelector)){this.initTOC()}else{document.addEventListener("DOMContentLoaded",this.initTOC)}};e.prototype.disconnectedCallback=function(){document.removeEventListener("DOMContentLoaded",this.initTOC)};e.prototype.render=function(){return h("nav",{class:"toc"})};return e}();TableOfContents.elementName="stencila-toc";TableOfContents.style={default:defaultTableOfContentsCss,material:tableOfContentsMaterialCss};export{TableOfContents as stencila_toc};