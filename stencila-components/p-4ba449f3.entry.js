import{r as t,h as o}from"./p-717250b8.js";import{c as n,a as i}from"./p-7d5dbd9a.js";var e={tocSelector:".js-toc",contentSelector:".js-toc-content",headingSelector:"h1, h2, h3",ignoreSelector:".js-toc-ignore",hasInnerContainers:!1,linkClass:"toc-link",extraLinkClasses:"",activeLinkClass:"is-active-link",listClass:"toc-list",extraListClasses:"",isCollapsedClass:"is-collapsed",collapsibleClass:"is-collapsible",listItemClass:"toc-list-item",activeListItemClass:"is-active-li",collapseDepth:0,scrollSmooth:!0,scrollSmoothDuration:420,scrollSmoothOffset:0,scrollEndCallback:function(){},headingsOffset:1,throttleTimeout:50,positionFixedSelector:null,positionFixedClass:"is-position-fixed",fixedSidebarOffset:"auto",includeHtml:!1,onClick:function(){},orderedList:!0,scrollContainer:null,skipRendering:!1,headingLabelCallback:!1,ignoreHiddenElements:!1,headingObjectCallback:null,basePath:"",disableTocScrollSync:!1},c=function(t){var o=[].forEach,n=[].some,i=document.body,e=!0,c=" ";function r(n,i){var e,l,s,u=i.appendChild((e=n,l=document.createElement("li"),s=document.createElement("a"),t.listItemClass&&l.setAttribute("class",t.listItemClass),t.onClick&&(s.onclick=t.onClick),t.includeHtml&&e.childNodes.length?o.call(e.childNodes,(function(t){s.appendChild(t.cloneNode(!0))})):s.textContent=e.textContent,s.setAttribute("href",t.basePath+"#"+e.id),s.setAttribute("class",t.linkClass+c+"node-name--"+e.nodeName+c+t.extraLinkClasses),l.appendChild(s),l));if(n.children.length){var d=a(n.isCollapsed);n.children.forEach((function(t){r(t,d)})),u.appendChild(d)}}function a(o){var n=document.createElement(t.orderedList?"ol":"ul"),i=t.listClass+c+t.extraListClasses;return o&&(i+=c+t.collapsibleClass,i+=c+t.isCollapsedClass),n.setAttribute("class",i),n}function l(o){var n=0;return o!==document.querySelector(t.contentSelector&&null!=o)&&(n=o.offsetTop,t.hasInnerContainers&&(n+=l(o.offsetParent))),n}function s(o){return-1!==o.className.indexOf(t.collapsibleClass)&&-1!==o.className.indexOf(t.isCollapsedClass)?(o.className=o.className.split(c+t.isCollapsedClass).join(""),s(o.parentNode.parentNode)):o}return{enableTocAnimation:function(){e=!0},disableTocAnimation:function(o){var n=o.target||o.srcElement;"string"==typeof n.className&&-1!==n.className.indexOf(t.linkClass)&&(e=!1)},render:function(t,o){var n=a(!1);o.forEach((function(t){r(t,n)}));var i=document.querySelector(t);if(null!==i)return i.firstChild&&i.removeChild(i.firstChild),0===o.length?i:i.appendChild(n)},updateToc:function(r){var a;a=t.scrollContainer&&document.querySelector(t.scrollContainer)?document.querySelector(t.scrollContainer).scrollTop:document.documentElement.scrollTop||i.scrollTop,t.positionFixedSelector&&function(){var o;o=t.scrollContainer&&document.querySelector(t.scrollContainer)?document.querySelector(t.scrollContainer).scrollTop:document.documentElement.scrollTop||i.scrollTop;var n=document.querySelector(t.positionFixedSelector);"auto"===t.fixedSidebarOffset&&(t.fixedSidebarOffset=document.querySelector(t.tocSelector).offsetTop),o>t.fixedSidebarOffset?-1===n.className.indexOf(t.positionFixedClass)&&(n.className+=c+t.positionFixedClass):n.className=n.className.split(c+t.positionFixedClass).join("")}();var u,d=r;if(e&&null!==document.querySelector(t.tocSelector)&&d.length>0){n.call(d,(function(o,n){return l(o)>a+t.headingsOffset+10?(u=d[0===n?n:n-1],!0):n===d.length-1?(u=d[d.length-1],!0):void 0}));var f=document.querySelector(t.tocSelector).querySelectorAll("."+t.linkClass);o.call(f,(function(o){o.className=o.className.split(c+t.activeLinkClass).join("")}));var m=document.querySelector(t.tocSelector).querySelectorAll("."+t.listItemClass);o.call(m,(function(o){o.className=o.className.split(c+t.activeListItemClass).join("")}));var h=document.querySelector(t.tocSelector).querySelector("."+t.linkClass+".node-name--"+u.nodeName+'[href="'+t.basePath+"#"+u.id.replace(/([ #;&,.+*~':"!^$[\]()=>|/@])/g,"\\$1")+'"]');-1===h.className.indexOf(t.activeLinkClass)&&(h.className+=c+t.activeLinkClass);var v=h.parentNode;v&&-1===v.className.indexOf(t.activeListItemClass)&&(v.className+=c+t.activeListItemClass);var p=document.querySelector(t.tocSelector).querySelectorAll("."+t.listClass+"."+t.collapsibleClass);o.call(p,(function(o){-1===o.className.indexOf(t.isCollapsedClass)&&(o.className+=c+t.isCollapsedClass)})),h.nextSibling&&-1!==h.nextSibling.className.indexOf(t.isCollapsedClass)&&(h.nextSibling.className=h.nextSibling.className.split(c+t.isCollapsedClass).join("")),s(h.parentNode.parentNode)}}}},r=function(t){var o=[].reduce;function n(t){return t[t.length-1]}function i(t){return+t.nodeName.split("H").join("")}function e(o){if(!(o instanceof window.HTMLElement))return o;if(t.ignoreHiddenElements&&(!o.offsetHeight||!o.offsetParent))return null;var n={id:o.id,children:[],nodeName:o.nodeName,headingLevel:i(o),textContent:t.headingLabelCallback?String(t.headingLabelCallback(o.textContent)):o.textContent.trim()};return t.includeHtml&&(n.childNodes=o.childNodes),t.headingObjectCallback?t.headingObjectCallback(n,o):n}return{nestHeadingsArray:function(i){return o.call(i,(function(o,i){var c=e(i);return c&&function(o,i){for(var c=e(o),r=c.headingLevel,a=i,l=n(a),s=r-(l?l.headingLevel:0);s>0;)(l=n(a))&&void 0!==l.children&&(a=l.children),s--;r>=t.collapseDepth&&(c.isCollapsed=!0),a.push(c)}(c,o.nest),o}),{nest:[]})},selectHeadings:function(o,n){var i=n;t.ignoreSelector&&(i=n.split(",").map((function(o){return o.trim()+":not("+t.ignoreSelector+")"})));try{return document.querySelector(o).querySelectorAll(i)}catch(e){return console.warn("Element not found: "+o),null}}}},a=function(t){var o=document.querySelector(t.tocSelector);if(o&&o.scrollHeight>o.clientHeight){var n=o.querySelector("."+t.activeListItemClass);n&&(o.scrollTop=n.offsetTop)}},l=function(t){var o=t.duration,n=t.offset,i=location.hash?e(location.href):location.href;function e(t){return t.slice(0,t.lastIndexOf("#"))}document.body.addEventListener("click",(function(c){var r;"a"!==(r=c.target).tagName.toLowerCase()||!(r.hash.length>0||"#"===r.href.charAt(r.href.length-1))||e(r.href)!==i&&e(r.href)+"#"!==i||c.target.className.indexOf("no-smooth-scroll")>-1||"#"===c.target.href.charAt(c.target.href.length-2)&&"!"===c.target.href.charAt(c.target.href.length-1)||-1===c.target.className.indexOf(t.linkClass)||function(t,o){var n,i,e=window.pageYOffset,c={duration:o.duration,offset:o.offset||0,callback:o.callback,easing:o.easing||function(t,o,n,i){return(t/=i/2)<1?n/2*t*t+o:-n/2*(--t*(t-2)-1)+o}},r=document.querySelector('[id="'+decodeURI(t).split("#").join("")+'"]'),a="string"==typeof t?c.offset+(t?r&&r.getBoundingClientRect().top||0:-(document.documentElement.scrollTop||document.body.scrollTop)):t,l="function"==typeof c.duration?c.duration(a):c.duration;function s(t){i=t-n,window.scrollTo(0,c.easing(i,e,a,l)),i<l?requestAnimationFrame(s):(window.scrollTo(0,e+a),"function"==typeof c.callback&&c.callback())}requestAnimationFrame((function(t){n=t,s(t)}))}(c.target.hash,{duration:o,offset:n,callback:function(){var t;(t=document.getElementById(c.target.hash.substring(1)))&&(/^(?:a|select|input|button|textarea)$/i.test(t.tagName)||(t.tabIndex=-1),t.focus())}})}),!1)},s=n((function(t){t.exports=function(t){var o,n,i,s=e,u={},d={},f=c,m=r,h=a,v=!!(t&&t.document&&t.document.querySelector&&t.addEventListener);if("undefined"!=typeof window||v){var p=Object.prototype.hasOwnProperty;return d.destroy=function(){if(!u.skipRendering)try{document.querySelector(u.tocSelector).innerHTML=""}catch(t){console.warn("Element not found: "+u.tocSelector)}u.scrollContainer&&document.querySelector(u.scrollContainer)?(document.querySelector(u.scrollContainer).removeEventListener("scroll",this._scrollListener,!1),document.querySelector(u.scrollContainer).removeEventListener("resize",this._scrollListener,!1),o&&document.querySelector(u.scrollContainer).removeEventListener("click",this._clickListener,!1)):(document.removeEventListener("scroll",this._scrollListener,!1),document.removeEventListener("resize",this._scrollListener,!1),o&&document.removeEventListener("click",this._clickListener,!1))},d.init=function(t){if(v&&(u=function(){for(var t={},o=0;o<arguments.length;o++){var n=arguments[o];for(var i in n)p.call(n,i)&&(t[i]=n[i])}return t}(s,t||{}),this.options=u,this.state={},u.scrollSmooth&&(u.duration=u.scrollSmoothDuration,u.offset=u.scrollSmoothOffset,d.scrollSmooth=l(u)),o=f(u),n=m(u),this._buildHtml=o,this._parseContent=n,d.destroy(),null!==(i=n.selectHeadings(u.contentSelector,u.headingSelector)))){var e=n.nestHeadingsArray(i);u.skipRendering||o.render(u.tocSelector,e.nest),this._scrollListener=g((function(t){o.updateToc(i),!u.disableTocScrollSync&&h(u),(t&&(0===t.eventPhase||null===t.currentTarget)||t&&t.target&&t.target.scrollingElement&&0===t.target.scrollingElement.scrollTop)&&(o.updateToc(i),u.scrollEndCallback&&u.scrollEndCallback(t))}),u.throttleTimeout),this._scrollListener(),u.scrollContainer&&document.querySelector(u.scrollContainer)?(document.querySelector(u.scrollContainer).addEventListener("scroll",this._scrollListener,!1),document.querySelector(u.scrollContainer).addEventListener("resize",this._scrollListener,!1)):(document.addEventListener("scroll",this._scrollListener,!1),document.addEventListener("resize",this._scrollListener,!1));var c=null;return this._clickListener=g((function(t){u.scrollSmooth&&o.disableTocAnimation(t),o.updateToc(i),c&&clearTimeout(c),c=setTimeout((function(){o.enableTocAnimation()}),u.scrollSmoothDuration)}),u.throttleTimeout),u.scrollContainer&&document.querySelector(u.scrollContainer)?document.querySelector(u.scrollContainer).addEventListener("click",this._clickListener,!1):document.addEventListener("click",this._clickListener,!1),this}},d.refresh=function(t){d.destroy(),d.init(t||this.options)},t.tocbot=d,d}function g(t,o,n){var i,e;return o||(o=250),function(){var c=n||this,r=+new Date,a=arguments;i&&r<i+o?(clearTimeout(e),e=setTimeout((function(){i=r,t.apply(c,a)}),o)):(i=r,t.apply(c,a))}}}(void 0!==i?i:i.window||i.global)}));const u=class{constructor(o){t(this,o),this.contentSelector="article",this.headingSelector="h1, h2, h3, h4",this.initTOC=()=>{s.init({tocSelector:".toc",positionFixedSelector:".toc",contentSelector:this.contentSelector,headingSelector:this.headingSelector})}}componentDidLoad(){"interactive"===document.readyState||"complete"===document.readyState&&document.querySelector(this.contentSelector)?this.initTOC():document.addEventListener("DOMContentLoaded",this.initTOC)}disconnectedCallback(){document.removeEventListener("DOMContentLoaded",this.initTOC)}render(){return o("nav",{class:"toc"})}};u.elementName="stencila-toc",u.style={default:'a{font-family:sans-serif;font-family:var(--font-family-body,sans-serif);font-size:1rem;text-decoration:none;color:#000;color:var(--color-key,#000)}.toc{overflow-y:auto}.toc>.toc-list{overflow:hidden;position:relative}.toc>.toc-list li{list-style-type:none;line-height:1.625}.toc-list{margin:0;padding-left:.5rem}a.toc-link{height:100%;color:currentColor;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}a.toc-link:not(.is-active-link):hover{padding-left:.5rem}.is-collapsible{overflow:hidden;max-height:1000px;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.is-collapsed{max-height:0}.is-position-fixed{top:0;padding-top:1rem;position:fixed;position:fixed!important}.is-active-link{font-weight:700}.toc-link:before{position:absolute;background-color:#f7fafc;background-color:var(--color-neutral-100,#f7fafc);display:inline-block;left:0;width:.25rem;margin-top:-1px;content:" ";height:inherit}.is-active-link:before{background-color:#4299e1;background-color:var(--color-primary-500,#4299e1)}',material:'a{font-family:sans-serif;font-family:var(--font-family-body,sans-serif);font-size:1rem;text-decoration:none;color:#000;color:var(--color-key,#000)}.toc{overflow-y:auto}.toc>.toc-list{overflow:hidden;position:relative}.toc>.toc-list li{list-style-type:none;line-height:1.625}.toc-list{margin:0;padding-left:.5rem}a.toc-link{height:100%;color:currentColor;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}a.toc-link:not(.is-active-link):hover{padding-left:.5rem}.is-collapsible{overflow:hidden;max-height:1000px;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.is-collapsed{max-height:0}.is-position-fixed{top:0;padding-top:1rem;position:fixed;position:fixed!important}.is-active-link{font-weight:700}.toc-link:before{position:absolute;background-color:#f7fafc;background-color:var(--color-neutral-100,#f7fafc);display:inline-block;left:0;width:.25rem;margin-top:-1px;content:" ";height:inherit}.is-active-link:before{background-color:#4299e1;background-color:var(--color-primary-500,#4299e1)}'};export{u as stencila_toc}