@import '../base.css';
@import '../atoms/code.css';

:host,
stencila-code-expression {
  @apply inline-flex items-stretch p-0 overflow-hidden text-sm leading-none align-bottom border border-solid rounded border-neutral-300;

  stencila-tooltip {
    @apply inline-flex items-stretch p-0 overflow-hidden leading-none align-bottom;
  }

  .source {
    @apply inline-flex flex-initial whitespace-no-wrap rounded-l bg-neutral-200;
  }

  ::slotted([slot='text']),
  [slot='text'] {
    @apply inline-block px-2 py-1 font-mono;
    transition: width 120ms ease-out;
    width: var(--source-width);
  }

  ::slotted([slot='output']),
  [slot='output'] {
    @apply inline-block py-1 pl-1 pr-2 font-mono border-none bg-stock min-w-em;
    transition: padding 120ms ease-out;

    stencila-icon {
      --height: 1rem;
      @apply h-4;

      svg {
        @apply h-4 stroke-warn-700;
      }
    }
  }

  .divider {
    @apply self-center inline-block w-2 max-h-em;
    fill: var(--color-neutral-200);
  }

  .source stencila-icon {
    @apply inline-flex items-stretch self-stretch w-0 pt-px overflow-hidden cursor-pointer max-w-0;
    transition: padding 120ms ease-out, width 120ms ease-out;

    &:focus,
    &:hover {
      @apply bg-neutral-300;
    }
  }

  &.sourceHidden {
    .source stencila-icon,
    ::slotted([slot='text']),
    [slot='text'],
    .divider {
      @apply w-0 pl-0 pr-0;
    }

    ::slotted([slot='output']),
    [slot='output'] {
      @apply pr-1;
    }
  }

  &.isOutputEmpty {
    ::slotted([slot='output']),
    [slot='output'] {
      @apply text-neutral-600;
    }
  }

  &:focus,
  &:hover {
    ::slotted([slot='text']),
    [slot='text'] {
      @apply px-2;
      width: var(--source-width);
    }

    .divider {
      @apply w-2;
    }

    ::slotted([slot='output']),
    [slot='output'] {
      @apply pr-2;
    }

    .source stencila-icon {
      @apply max-w-full px-1 border-r border-neutral-300;
      width: 1.75rem;
    }
  }
}
