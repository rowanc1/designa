@import '../base.css';
@import '../atoms/code.css';

:host,
stencila-code-expression {
  /** @prop --background: Background color of the Code Output section */
  --background: var(--color-stock);

  /** @prop --background-editor: Background color of the Code Editor section */
  --background-editor: var(--color-neutral-200);

  /** @prop --border: Border color around the component as well as internal section dividers */
  --border: var(--color-neutral-300);

  @apply inline-flex items-stretch p-0 text-sm leading-none align-text-bottom border border-solid rounded;
  border-color: var(--border);

  stencila-tooltip {
    @apply inline-flex items-stretch p-0 overflow-hidden leading-none align-bottom;
  }

  .actions {
    @apply relative inline-flex flex-initial whitespace-no-wrap rounded-l;
    background-color: var(--background-editor);
  }

  .text {
    @apply inline-block py-0 pl-1 pr-2 overflow-hidden font-mono whitespace-pre-line min-w-em duration-150 ease-out;
    transition-property: width;
  }

  [icon='terminal'] {
    @apply text-primary-500 min-w-em;
  }

  ::slotted([slot='output']),
  [slot='output'] {
    @apply inline-block py-1 pl-1 pr-2 font-mono border-none bg-stock text-key;
    transition: padding 120ms ease-out;

    stencila-icon {
      --height: 1rem;
      @apply h-4;

      svg {
        @apply h-4 stroke-warn-600;
      }
    }
  }

  .divider {
    @apply self-center inline-block w-2 max-h-em;
    fill: var(--background-editor);
  }

  .actions stencila-icon {
    @apply inline-flex items-stretch self-stretch pt-px overflow-hidden cursor-default transition ease-out duration-150;
    transition-property: padding, width;

    &:not([icon='terminal']):focus,
    &:not([icon='terminal']):hover {
      @apply cursor-pointer bg-neutral-300;
    }
  }

  .extraActions stencila-icon {
    @apply w-0 max-w-0;
  }

  &.codeHidden {
    .text {
      @apply w-0 min-w-0 pl-0 pr-0 overflow-hidden whitespace-no-wrap;
    }

    ::slotted([slot='output']),
    [slot='output'] {
      @apply pr-1;
    }
  }

  &.isOutputEmpty {
    ::slotted([slot='output']),
    [slot='output'] {
      @apply text-neutral-600;
    }
  }

  &.hover,
  &:focus,
  &:focus-within,
  &:hover {
    ::slotted([slot='text']),
    [slot='text'] {
      @apply px-2 min-w-em;
    }

    ::slotted([slot='output']),
    [slot='output'] {
      @apply pr-2;
    }

    .extraActions stencila-icon {
      @apply max-w-full px-1 border-r;
      border-color: var(--border);
      width: 1.75rem;
    }
  }
}
